"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[561],{1210:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/errors-07d7678e8e6ee5084ce041aa443c0689.png"},3588:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"module-1/embedding-dashboard","title":"Embedding a Dashboard","description":"\ud83c\udfaf Goal","source":"@site/docs/module-1/2-embedding-dashboard.md","sourceDirName":"module-1","slug":"/module-1/embedding-dashboard","permalink":"/simple-looker-extension-elevate-25/docs/module-1/embedding-dashboard","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Project Setup & Entitlements","permalink":"/simple-looker-extension-elevate-25/docs/module-1/project-setup"},"next":{"title":"Saving Dashboard State and Filters","permalink":"/simple-looker-extension-elevate-25/docs/module-1/saving-dashboard-state"}}');var t=s(4848),r=s(8453);const l={},i="Embedding a Dashboard",d={},a=[{value:"\ud83c\udfaf Goal",id:"-goal",level:2},{value:"\ud83d\udee0\ufe0f Instructions",id:"\ufe0f-instructions",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"embedding-a-dashboard",children:"Embedding a Dashboard"})}),"\n",(0,t.jsx)(n.h2,{id:"-goal",children:"\ud83c\udfaf Goal"}),"\n",(0,t.jsxs)(n.p,{children:["In this step, you'll embed a Looker dashboard into your extension using the Embed SDK. Along the way, you'll learn how to import packages, configure your React component, and use React's ",(0,t.jsx)(n.code,{children:"useCallback"})," hook to control how the dashboard loads."]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-instructions",children:"\ud83d\udee0\ufe0f Instructions"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Open up the ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(7381).A+"",children:"Dashboard.tsx"})," file."]}),"\n",(0,t.jsxs)(n.li,{children:["In most of the ",(0,t.jsx)(n.code,{children:".tsx"})," files you will edit in the tutorial, there are five main things you will see in the file.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Imports at the top of the file"}),"\n",(0,t.jsxs)(n.li,{children:["Optionally some styled components like ",(0,t.jsx)(n.code,{children:"const StyledCard = styled(Card)``;"})]}),"\n",(0,t.jsxs)(n.li,{children:["Optionally some types like ",(0,t.jsx)(n.code,{children:"interface MyType {}"})]}),"\n",(0,t.jsxs)(n.li,{children:["A React component like ",(0,t.jsx)(n.code,{children:"const Component: React.FC = () => {"})," function that also includes a ",(0,t.jsx)(n.code,{children:"return (...)"})," that contains React TSX code."]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.code,{children:"const dashboardRef = useCallback((el: HTMLDivElement) => {"})," function that uses the ",(0,t.jsx)(n.code,{children:"useCallback"})," hook to control how the dashboard loads."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," You will usually need to update only the imports at the top or the contents of the React component. For the react component, we will be explicit whether we are telling you to replace the entire component or just update part of it."]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Replace the full Dashboard component to the following:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"before"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'const Dashboard: React.FC = () => {\n  return (\n    <StyledCard p="xsmall" raised borderRadius="large">\n      Dashboard Goes Here\n    </StyledCard>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"after"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'const Dashboard: React.FC = () => {\n  const extension_sdk = useExtensionSdk();\n  const dashboardRef = useCallback((el: HTMLDivElement) => {\n    if (el && !el.children.length) {\n      const embed_sdk = getEmbedSDK();\n      embed_sdk.init(extension_sdk.lookerHostData?.hostUrl!);\n      embed_sdk\n        .createDashboardWithId("thelook::business_pulse")\n        .appendTo(el)\n        .build()\n        .connect()\n        .catch((error: any) => {\n          console.error("Error embedding dashboard:", error);\n        });\n    }\n  }, []);\n\n  return (\n    <StyledCard p="xsmall" raised borderRadius="large" ref={dashboardRef} />\n  );\n};\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This code uses the ",(0,t.jsx)(n.a,{href:"https://cloud.google.com/looker/docs/embed-sdk-intro",children:"Looker Embed SDK"}),' to dynamically embed a dashboard inside your extension using an iframe. It creates a dashboard instance with a specific ID ("thelook::business_pulse"), attaches it to a DOM element, and connects it to Looker.']}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"embed_sdk"})," object provides a clean, chainable API to:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Initialize the connection to your Looker host"}),"\n",(0,t.jsx)(n.li,{children:"Embed the dashboard"}),"\n",(0,t.jsx)(n.li,{children:"Connect and handle errors if the embed fails"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"You should now see some errors in your IDE that look like this:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"errors",src:s(1210).A+"",width:"1066",height:"306"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Resolve the imports by adding the following to the top of the file. Through the tutorial, we try to be explicit about adding imports, but you should be able to identify the missing imports by the red squiggly lines in your IDE."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { getEmbedSDK } from "@looker/embed-sdk";\nimport useExtensionSdk from "./hooks/useExtensionSdk";\nimport { useCallback } from "react";\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsxs)(n.li,{children:["Refresh the extension in the browser. You should now see the dashboard embedded in the card on the right. If you do not, make sure you set up the application entitlements correctly in the ",(0,t.jsx)(n.a,{href:"/simple-looker-extension-elevate-25/docs/module-1/project-setup",children:"project setup"})," step (",(0,t.jsx)(n.code,{children:"use_embeds: yes"})," and ",(0,t.jsx)(n.code,{children:"use_iframes: yes"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"Learn more:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/simple-looker-extension-elevate-25/docs/module-1/glossary#importing-javascript-packages",children:"\ud83d\udcd8 Importing JavaScript Packages"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/simple-looker-extension-elevate-25/docs/module-1/glossary#npm",children:"\ud83d\udcd8 npm Package Manager"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/simple-looker-extension-elevate-25/docs/module-1/glossary#embed-sdk",children:"\ud83d\udcd8 Embed SDK"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/simple-looker-extension-elevate-25/docs/module-1/glossary#reacts-usecallback",children:"\ud83d\udcd8 React's useCallback"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},7381:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/files/Dashboard-4ff83c61d663d3e3494c2daf2b57ffe4.tsx"},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var o=s(6540);const t={},r=o.createContext(t);function l(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);